{"version":3,"sources":["public_schedule/components/MonitorHeader.js","public_schedule/pages/MonitorDisplay.js"],"names":["ScheduleHeader","title","time","Date","toLocaleTimeString","useState","currentTime","SetCurrentTime","setInterval","ctime","hour","minute","calcTime","className","containerVariant","hidden","opacity","y","show","transition","ease","duration","delay","staggerChildren","itemVariant","imageVariant","MonitorDisplay","useHttpClient","isLoading","error","sendRequest","clearError","scheduleId","useParams","day","live","setLive","currentDisplay","setCurrentDisplay","eventInfo","setEventInfo","useEffect","interval","a","process","responseData","isEvent","console","log","message","request","data","checkMorningHours","hourNum","Number","schedule","stage","URLSearchParams","document","location","search","get","currentEvent","scheduleList","sort","b","startTime","split","filter","find","event","now","setHours","endTime","clearInterval","onClear","asOverlay","div","variants","initial","animate","h4","h1","presenter","p","image","img","src","alt","logo"],"mappings":"iIAuBeA,IArBf,YAAkC,IAATC,EAAQ,EAARA,MACjBC,GAAO,IAAIC,MAAOC,qBADO,EAEOC,mBAASH,GAFhB,mBAExBI,EAFwB,KAEXC,EAFW,KAa/B,OAJAC,aAAY,YALK,WACf,IAAMC,GAAQ,IAAIN,MAAOC,mBAAmB,GAAI,CAACM,KAAM,UAAWC,OAAO,YACzEJ,EAAeE,GAIfG,KACC,KAGD,4BAAQC,UAAU,iHAChB,4BAAKZ,GACL,4BAAKK,M,sJCRLQ,EAAmB,CACxBC,OAAQ,CAAEC,QAAS,EAAGC,EAAG,IACzBC,KAAM,CACLF,QAAS,EACTC,EAAG,EACHE,WAAY,CACXC,KAAM,UACNC,SAAU,GACVC,MAAQ,GACRC,gBAAiB,MAKdC,EAAc,CACnBT,OAAQ,CAAEC,QAAS,EAAGC,EAAG,IACzBC,KAAM,CACLF,QAAS,EACTC,EAAG,EACHE,WAAY,CACXC,KAAM,UACNC,SAAU,MAKPI,EAAe,CACpBV,OAAQ,CAAEC,QAAS,GACnBE,KAAM,CACLF,QAAS,EACTG,WAAY,CACXC,KAAM,UACNE,MAAQ,GACRD,SAAU,MAoHEK,UA/Gf,WAA2B,IAAD,EAC6BC,cAA9CC,EADiB,EACjBA,UAAWC,EADM,EACNA,MAAOC,EADD,EACCA,YAAaC,EADd,EACcA,WACjCC,EAAaC,cAAYD,WACzBE,EAAMD,cAAYC,IAHC,EAID7B,oBAAS,GAJR,mBAIlB8B,EAJkB,KAIZC,EAJY,OAKmB/B,mBAAS,MAL5B,mBAKlBgC,EALkB,KAKFC,EALE,OAMSjC,mBAAS,MANlB,mBAMlBkC,EANkB,KAMPC,EANO,KA6DzB,OArDAC,qBAAU,WACT,IAUIC,GAVS,uCAAG,4BAAAC,EAAA,+EAEWb,EAAY,GAAD,OAAIc,uDAAJ,8BAA2DZ,EAA3D,YAAyEE,IAF/F,OAEVW,EAFU,OAGdC,EAAQD,GAHM,gDAKdE,QAAQC,IAAI,KAAIC,SALF,yDAAH,qDAQbC,GAIA,IAAMJ,EAAU,SAAVA,EAAWK,GAChB,GAAGA,EAAK,CACP,IAAMC,EAAoB,SAAC1C,GAC1B,IAAM2C,EAAUC,OAAO5C,GACvB,OAAO2C,EAAU,EAAIA,EAAU,GAAKA,GAErCb,EAAaW,EAAKI,UAClB,IACMC,EADS,IAAIC,gBAAgBC,SAASC,SAASC,QAChCC,IAAI,SAGnBC,EAFsBX,EAAKI,SAASQ,aAAaC,MAAK,SAASrB,EAAGsB,GAAG,OAAOb,EAAkBT,EAAEuB,UAAUC,MAAM,KAAK,GAAK,IAAMxB,EAAEuB,UAAUC,MAAM,KAAK,IAAMf,EAAkBa,EAAEC,UAAUC,MAAM,KAAK,GAAK,IAAMF,EAAEC,UAAUC,MAAM,KAAK,OACpMC,QAAO,SAACb,GAAe,OAAOA,EAASC,QAAUA,KACxDa,MAAK,SAACC,GACxC,IAAMhE,EAAcH,KAAKoE,MACnBA,EAAM,IAAIpE,KACV+D,EAAYK,EAAIC,SAASpB,EAAkBkB,EAAMJ,UAAUC,MAAM,KAAK,IAAKG,EAAMJ,UAAUC,MAAM,KAAK,GAAI,GAC1GM,EAAUF,EAAIC,SAASpB,EAAkBkB,EAAMG,QAAQN,MAAM,KAAK,IAAKG,EAAMG,QAAQN,MAAM,KAAK,GAAI,GAO1G,OALAzB,EAAWlC,aAAY,WACtB4B,GAAQ,GACRU,EAAQK,KACN,KAEA7C,EAAc4D,GAAa5D,EAAcmE,GAC3CrC,GAAQ,GACDkC,GAEAhE,EAAc4D,GACrB9B,GAAQ,GACDkC,GAED,QAERhC,EAAkBwB,KAGpB,OAAO,kBAAMY,cAAchC,MAE1B,IAID,oCACC,kBAAC,IAAD,CAAYb,MAAOA,EAAO8C,QAAS5C,IAClCH,GACA,yBAAKf,UAAU,UACd,kBAAC,IAAD,CAAgB+D,WAAW,KAG7B,kBAAC,IAAkBrC,IACjBX,GAAaS,GACd,yBAAKxB,UAAU,+CACd,yBAAKA,UAAU,oGACd,kBAAC,IAAOgE,IAAR,CAAYhE,UAAU,8DACrBiE,SAAUhE,EACViE,QAAQ,SACRC,QAAQ,QACR,yBAAKnE,UAAU,qDACbsB,EAAO,SAAW,WAEpB,kBAAC,IAAO8C,GAAR,CAAWpE,UAAU,6FAA6FiE,SAAUtD,GAC3Ha,EAAe6B,UADhB,MAC8B7B,EAAeoC,SAE7C,kBAAC,IAAOS,GAAR,CAAWrE,UAAU,6FAA6FiE,SAAUtD,GAC1Ha,EAAe8C,WAEjB,kBAAC,IAAOC,EAAR,CAAUvE,UAAU,iEAAiEiE,SAAUtD,GAC7Fa,EAAemB,QAGlB,yBAAK3C,UAAU,qBACbwB,EAAegD,MACf,kBAAC,IAAOC,IAAR,CAAYC,IAAKlD,EAAegD,MAAOG,IAAKnD,EAAe8C,UAAWL,SAAUrD,EAAcsD,QAAQ,SAASC,QAAQ,SACtHzC,EAAUkD,KACX,kBAAC,IAAOH,IAAR,CAAYC,IAAKhD,EAAUkD,KAAMD,IAAKjD,EAAUtC,MAAO6E,SAAUrD,EAAcsD,QAAQ,SAASC,QAAQ,SACvG,SAKJpD,IAAcS,GACf,yBAAKxB,UAAU,+CACd,kBAAC,IAAD,KACC","file":"static/js/9.fe2fc2c3.chunk.js","sourcesContent":["import React, {useState} from 'react'\n\nfunction ScheduleHeader({title}) {\n  const time = new Date().toLocaleTimeString();\n  const [currentTime, SetCurrentTime] = useState(time);\n\n  const calcTime = () => {\n    const ctime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});\n    SetCurrentTime(ctime);\n  };\n\n  setInterval(() => {\n    calcTime();\n  }, 1000);\n\n  return (\n    <header className='flex w-full justify-between h-16 items-center fixed top-0 left-0 bg-gray-800 text-gray-600 px-6 md:px-20 z-10'>\n      <h2>{title}</h2>\n      <h2>{currentTime}</h2> \n    </header>\n  )\n}\n\nexport default ScheduleHeader;\n","import React, {useEffect, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\n\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport Card from \"../../shared/components/UIElements/Card\";\nimport MonitorHeader from \"../components/MonitorHeader\";\n\nconst containerVariant = {\n\thidden: { opacity: 0, y: 30 },\n\tshow: {\n\t\topacity: 1,\n\t\ty: 0,\n\t\ttransition: {\n\t\t\tease: \"easeOut\",\n\t\t\tduration: 0.5,\n\t\t\tdelay:  0.5,\n\t\t\tstaggerChildren: 0.7,\n\t\t}\n\t}\n}\n\nconst itemVariant = {\n\thidden: { opacity: 0, y: 30, },\n\tshow: { \n\t\topacity: 1, \n\t\ty: 0, \n\t\ttransition: {\n\t\t\tease: \"easeOut\",\n\t\t\tduration: 0.5,\n\t\t}\n\t}\n}\n\nconst imageVariant = {\n\thidden: { opacity: 0 },\n\tshow: { \n\t\topacity: 1, \n\t\ttransition: {\n\t\t\tease: \"easeOut\",\n\t\t\tdelay:  0.3,\n\t\t\tduration: 0.7\n\t\t}\n\t}\n}\n\nfunction MonitorDisplay() {\n\tconst { isLoading, error, sendRequest, clearError } = useHttpClient();\n\tconst scheduleId = useParams().scheduleId;\n\tconst day = useParams().day;\n\tconst [live, setLive] = useState(false)\n\tconst [currentDisplay, setCurrentDisplay] = useState(null);\n\tconst [eventInfo, setEventInfo] = useState(null);\n\t\n\tuseEffect(() => {\n\t\tconst request = async() => {\n\t\t\ttry {\n\t\t\t\tlet responseData = await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/schedules/display/${scheduleId}/${day}`);\n\t\t\t\tisEvent(responseData);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err.message);\n\t\t\t}\n\t\t};\n\t\trequest();\n\n\t\tlet interval;\n\n\t\tconst isEvent = (data) => {\n\t\t\tif(data){\n\t\t\t\tconst checkMorningHours = (hour) => {\n\t\t\t\t\tconst hourNum = Number(hour)\n\t\t\t\t\treturn hourNum < 5 ? hourNum + 24 : hourNum;\n\t\t\t\t}\n\t\t\t\tsetEventInfo(data.schedule);\n\t\t\t\tconst params = new URLSearchParams(document.location.search);\n\t\t\t\tconst stage = params.get(\"stage\");\n\t\t\t\tconst scheduleListOrdered = data.schedule.scheduleList.sort(function(a, b){return checkMorningHours(a.startTime.split(\":\")[0] + \".\" + a.startTime.split(\":\")[1]) - checkMorningHours(b.startTime.split(\":\")[0] + \".\" + b.startTime.split(\":\")[1])});\n\t\t\t\tconst filteredStage = scheduleListOrdered.filter((schedule) => { return schedule.stage === stage });\n\t\t\t\tconst currentEvent = filteredStage.find((event) => {\n\t\t\t\t\tconst currentTime = Date.now();\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst startTime = now.setHours(checkMorningHours(event.startTime.split(\":\")[0]), event.startTime.split(\":\")[1] ,0);\n\t\t\t\t\tconst endTime = now.setHours(checkMorningHours(event.endTime.split(\":\")[0]), event.endTime.split(\":\")[1] ,0);\n\n\t\t\t\t\tinterval = setInterval(() => {\n\t\t\t\t\t\tsetLive(false);\n\t\t\t\t\t\tisEvent(data);\n\t\t\t\t\t}, 60000);\n\n\t\t\t\t\tif(currentTime > startTime && currentTime < endTime) {\n\t\t\t\t\t\tsetLive(true)\n\t\t\t\t\t\treturn event;\n\t\t\t\t\t}\n\t\t\t\t\telse if(currentTime < startTime)\t{\n\t\t\t\t\t\tsetLive(false);\n\t\t\t\t\t\treturn event;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t})\n\t\t\t\tsetCurrentDisplay(currentEvent);\n\t\t\t}\n\t\t}\n\t\treturn () => clearInterval(interval);\n\t\t//eslint-disable-next-line\n\t},[]);\n\t\n\n\treturn (\n\t\t<>\n\t\t\t<ErrorModal error={error} onClear={clearError} />\n\t\t\t{isLoading && (\n\t\t\t\t<div className='center'>\n\t\t\t\t\t<LoadingSpinner asOverlay={true} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<MonitorHeader {...eventInfo} />\n\t\t\t{!isLoading && currentDisplay && (\n\t\t\t\t<div className='h-screen overflow-hidden w-full bg-gray-900'>\n\t\t\t\t\t<div className='px-20 pb-14 mx-auto flex justify-between content-center items-center flex-col sm:flex-row h-full'>\n\t\t\t\t\t\t<motion.div className='flex flex-col flex-grow justify-center sm:items-start pb-12' \n\t\t\t\t\t\t\tvariants={containerVariant}\n\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\tanimate=\"show\">\n\t\t\t\t\t\t\t<div className='py-2 px-4 bg-red-600 text-gray-100 font-bold mb-2'>\n\t\t\t\t\t\t\t\t{live ? \"ON NOW\" : \"UP NEXT\"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<motion.h4 className='my-2 text-4xl md:text-5xl text-indigo-600 font-bold leading-tight text-center sm:text-left' variants={itemVariant}>\n\t\t\t\t\t\t\t{currentDisplay.startTime} - {currentDisplay.endTime}\n\t\t\t\t\t\t\t</motion.h4>\n\t\t\t\t\t\t\t<motion.h1 className='text-4xl md:text-5xl text-indigo-200 pr-2 font-bold leading-tight text-center sm:text-left' variants={itemVariant}>\n\t\t\t\t\t\t\t\t{currentDisplay.presenter}\n\t\t\t\t\t\t\t</motion.h1>\n\t\t\t\t\t\t\t<motion.p className='my-10 leading-normal md:text-2xl mb-8 text-center sm:text-left' variants={itemVariant}>\n\t\t\t\t\t\t\t\t{currentDisplay.stage}\n\t\t\t\t\t\t\t</motion.p>\n\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t<div className='flex-grow-0 w-2/5'>\n\t\t\t\t\t\t\t{currentDisplay.image ?\n\t\t\t\t\t\t\t\t<motion.img src={currentDisplay.image} alt={currentDisplay.presenter} variants={imageVariant} initial=\"hidden\" animate=\"show\" />\n\t\t\t\t\t\t\t: eventInfo.logo ?\n\t\t\t\t\t\t\t\t<motion.img src={eventInfo.logo} alt={eventInfo.title} variants={imageVariant} initial=\"hidden\" animate=\"show\"  />\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!isLoading && !currentDisplay && (\n\t\t\t\t<div className='center w-11/12 max-w-2xl my-4 mx-auto mt-20'>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<h2>No event to display</h2>\n\t\t\t\t\t</Card>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default MonitorDisplay;\n"],"sourceRoot":""}