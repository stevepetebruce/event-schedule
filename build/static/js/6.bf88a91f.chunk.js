(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[6],{385:function(e,t,a){"use strict";a.r(t);var r=a(68),n=a(11),l=a.n(n),s=a(22),c=a(8),i=a(0),u=a.n(i),o=a(16),d=a(7),m=a(187),p=a.n(m),f=a(9),h=a(201),b=a(12),v=a(200),y=a(35),g=a(10),E=a(38),w=a(29),x=a(30),k=a(39),N=(a(218),f.d().shape({logo:f.f().url("Something went wrong. Please try again"),title:f.f().required("Please enter the name of your event"),description:f.f().min(10,"Please enter a longer description (minimum of 10 characters").required("Please enter a brief description of your event"),startDate:f.b().min(new Date,"Date must be in the future").required("A start date is required"),daysQty:f.c().required("Please enter the number of days of your event"),scheduleList:f.a().of(f.d().shape({presenter:f.f().required("Please enter the name of the presenter or artist"),startTime:f.f().required("A start time is required"),endTime:f.f().required("A finish time is required"),etitle:f.f(),stage:f.f().required("A venue/stage is required"),day:f.c().required("Please select the day"),socialList:f.d().shape({facebook:f.f().url("A enter a valid link, including https://"),twitter:f.f().url("A enter a valid link, including https://"),youtube:f.f().url("A enter a valid link, including https://"),soundcloud:f.f().url("A enter a valid link, including https://")})}))}));t.default=function(){var e=Object(i.useContext)(x.a),t=Object(k.a)(),a=t.isLoading,n=t.error,m=t.sendRequest,f=t.clearError,O=Object(i.useState)(),D=Object(c.a)(O,2),q=D[0],j=D[1],S=Object(o.m)().scheduleId,A=Object(o.k)(),C=Object(i.useState)(),P=Object(c.a)(C,2),L=P[0],T=P[1];return Object(i.useEffect)((function(){(function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://event-schedule-application.herokuapp.com/api","/schedules/").concat(S));case 3:t=e.sent,j(t.schedule),T(new Date(t.schedule.startDate)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[A,S,m]),a?u.a.createElement(w.a,{asOverlay:!0}):q||n?u.a.createElement("div",{className:"max-w-screen-md w-full mx-auto flex flex-col"},u.a.createElement(E.a,{error:n,onClear:f}),u.a.createElement("h1",{className:"pl-8 mb-4"},"Update Event"),u.a.createElement(d.e,{initialValues:{logo:q.logo,title:q.title,description:q.description,startDate:q.startDate,daysQty:q.daysQty,scheduleList:q.scheduleList},validationSchema:N,validateOnChange:!1,validateOnBlur:!1,enableReinitialize:!0,onSubmit:function(){var t=Object(s.a)(l.a.mark((function t(a,n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=n.setSubmitting)({values:a}),t.prev=2,t.next=5,m("".concat("https://event-schedule-application.herokuapp.com/api","/schedules/").concat(S),"PATCH",JSON.stringify(Object(r.a)({},a)),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 5:A.push("/"+e.userId+"/schedules"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:s(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){var t=e.values,r=e.isSubmitting,n=e.setFieldValue,l=e.touched,s=e.errors,c=e.handleChange;return u.a.createElement(d.d,{className:"bg-gray-900 shadow-md rounded-lg px-8 pt-6 pb-8 mb-4 w-full mt-20"},a&&u.a.createElement(w.a,{asOverlay:!0}),u.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-4"},u.a.createElement("div",{className:"w-full md:w-2/12 px-3 mb-6 md:mb-0"},u.a.createElement(v.a,{name:"logo",label:"Event Logo",value:t.logo})),u.a.createElement("div",{className:"w-full md:pl-1 md:w-10/12"},u.a.createElement("div",{className:"mb-4"},u.a.createElement(b.a,{control:"input",type:"text",label:"Title",name:"title"})),u.a.createElement("div",{className:"mb-4"},u.a.createElement(b.a,{control:"textarea",label:"Description",name:"description",rows:"3"})),u.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-4"},u.a.createElement("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},u.a.createElement("label",{htmlFor:"startDate",className:"text-gray-400 block w-full"},"Start Date"),u.a.createElement(p.a,{selected:L,onChange:function(e){n("startDate",e),T(e)},selectsStart:!0,startDate:L,dateFormat:"dd/MM/yyyy",name:"startDate",className:"form-input mt-1 block w-full bg-gray-800 text-gray-400 rounded-md border-none p-3"}),s.startDate&&l.startDate?u.a.createElement("p",{className:"text-red-500 text-xs italic"},s.startDate):null),u.a.createElement("div",{className:"w-full md:w-1/2 px-3"},u.a.createElement(b.a,{control:"input",type:"number",label:"How many days is the event?",name:"daysQty",min:"1"}))))),u.a.createElement("h2",{className:"py-4"},"Update Event List"),u.a.createElement(h.a,{values:t,setFieldValue:n,onChange:c}),u.a.createElement(g.a,{default:!0,disabled:r,type:"submit"},"Submit"))}))):u.a.createElement("div",{className:"center"},u.a.createElement(y.a,null,u.a.createElement("h2",null,"Schedule could not be found")))}}}]);
//# sourceMappingURL=6.bf88a91f.chunk.js.map